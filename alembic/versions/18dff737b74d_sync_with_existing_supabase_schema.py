"""sync with existing supabase schema

Revision ID: 18dff737b74d
Revises: eacaa438fbc2
Create Date: 2025-12-19 03:07:58.297333

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = '18dff737b74d'
down_revision: Union[str, Sequence[str], None] = 'eacaa438fbc2'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_player_live_stats_id'), table_name='player_live_stats')
    op.drop_index(op.f('ix_player_live_stats_match_id'), table_name='player_live_stats')
    op.drop_index(op.f('ix_player_live_stats_player_id'), table_name='player_live_stats')
    op.drop_table('player_live_stats')
    op.drop_index(op.f('ix_live_matches_id'), table_name='live_matches')
    op.drop_index(op.f('ix_live_matches_match_id'), table_name='live_matches')
    op.drop_table('live_matches')
    op.drop_index(op.f('ix_competition_stats_player_id'), table_name='competition_stats')
    op.drop_constraint(op.f('unique_stats_per_competition'), 'competition_stats', type_='unique')
    op.drop_index(op.f('ix_goalkeeper_stats_player_id'), table_name='goalkeeper_stats')
    op.drop_constraint(op.f('unique_match_event'), 'player_matches', type_='unique')
    op.create_unique_constraint('uq_player_match', 'player_matches', ['player_id', 'match_date', 'competition', 'opponent'])
    op.add_column('player_season_stats', sa.Column('matches', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('goals', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('assists', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('yellow_cards', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('red_cards', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('minutes_played', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('starts', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('xG', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('xA', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('team', sa.String(), nullable=True))
    op.add_column('player_season_stats', sa.Column('league', sa.String(), nullable=True))
    op.add_column('player_season_stats', sa.Column('shots_total', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('shots_on_target', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('shots_on_target_pct', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('goals_per_shot', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('goals_per_shot_on_target', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('average_shot_distance', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('free_kick_shots', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('penalty_kicks_made', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('penalty_kicks_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('xg_net', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('npxg_per_shot', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_completed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('pass_completion_pct', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('total_passing_distance', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('progressive_passing_distance', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('short_passes_completed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('short_passes_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('medium_passes_completed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('medium_passes_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('long_passes_completed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('long_passes_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('key_passes', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_into_final_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_into_penalty_area', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('crosses_into_penalty_area', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('progressive_passes', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('live_ball_passes', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dead_ball_passes', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('free_kick_passes', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('through_balls', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('switches', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('crosses', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('throw_ins', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('corner_kicks', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('inswinging_corners', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('outswinging_corners', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('straight_corners', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_offside', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_blocked', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('shot_creating_actions', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_live_pass', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_dead_ball', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_dribble', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_shot', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_foul_drawn', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('sca_defensive_action', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('goal_creating_actions', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_live_pass', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_dead_ball', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_dribble', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_shot', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_foul_drawn', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('gca_defensive_action', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('tackles', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('tackles_won', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('tackles_def_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('tackles_mid_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('tackles_att_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribble_tackles', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribbles_vs_tackles', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribbled_past', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('blocks', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('shots_blocked', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('pass_blocks', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('interceptions', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('clearances', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('errors', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_def_pen_area', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_def_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_mid_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_att_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_att_pen_area', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('touches_live_ball', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribbles_completed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribbles_attempted', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dribble_success_pct', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('players_dribbled_past', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('nutmegs', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('carries', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('total_carrying_distance', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('progressive_carrying_distance', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('progressive_carries', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('carries_into_final_third', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('carries_into_penalty_area', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('miscontrols', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('dispossessed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('passes_received', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('progressive_passes_received', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('minutes_per_match', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('minutes_pct', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('minutes_per_start', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('complete_matches', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('substitutions_on', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('substitutions_off', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('unused_substitute', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('points_per_match', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('on_goals_for', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('on_goals_against', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('plus_minus', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('plus_minus_per_90', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('on_xg_for', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('on_xg_against', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('xg_plus_minus', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('xg_plus_minus_per_90', sa.Float(), nullable=True))
    op.add_column('player_season_stats', sa.Column('fouls_committed', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('fouls_drawn', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('offsides', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('penalty_kicks_won', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('penalty_kicks_conceded', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('own_goals', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('ball_recoveries', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('aerials_won', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('aerials_lost', sa.Integer(), nullable=True))
    op.add_column('player_season_stats', sa.Column('aerials_won_pct', sa.Float(), nullable=True))
    op.alter_column('player_season_stats', 'season',
               existing_type=sa.VARCHAR(),
               type_=sa.Integer(),
               existing_nullable=False)
    op.drop_constraint(op.f('uq_player_season'), 'player_season_stats', type_='unique')
    op.create_index(op.f('ix_player_season_stats_season'), 'player_season_stats', ['season'], unique=False)
    op.drop_constraint(op.f('player_season_stats_player_id_fkey'), 'player_season_stats', type_='foreignkey')
    op.create_foreign_key(None, 'player_season_stats', 'players', ['player_id'], ['id'])
    op.drop_column('player_season_stats', 'total_assists')
    op.drop_column('player_season_stats', 'total_minutes')
    op.drop_column('player_season_stats', 'total_goals')
    op.drop_column('player_season_stats', 'total_games')
    op.alter_column('players', 'name',
               existing_type=sa.VARCHAR(),
               nullable=True)
    op.drop_constraint(op.f('players_api_id_key'), 'players', type_='unique')
    op.drop_index(op.f('ix_players_api_id'), table_name='players')
    op.create_index(op.f('ix_players_api_id'), 'players', ['api_id'], unique=True)
    op.drop_column('players', 'fbref_id')
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('players', sa.Column('fbref_id', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_players_api_id'), table_name='players')
    op.create_index(op.f('ix_players_api_id'), 'players', ['api_id'], unique=False)
    op.create_unique_constraint(op.f('players_api_id_key'), 'players', ['api_id'], postgresql_nulls_not_distinct=False)
    op.alter_column('players', 'name',
               existing_type=sa.VARCHAR(),
               nullable=False)
    op.add_column('player_season_stats', sa.Column('total_games', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('player_season_stats', sa.Column('total_goals', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('player_season_stats', sa.Column('total_minutes', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.add_column('player_season_stats', sa.Column('total_assists', sa.INTEGER(), server_default=sa.text('0'), autoincrement=False, nullable=True))
    op.drop_constraint(None, 'player_season_stats', type_='foreignkey')
    op.create_foreign_key(op.f('player_season_stats_player_id_fkey'), 'player_season_stats', 'players', ['player_id'], ['id'], ondelete='CASCADE')
    op.drop_index(op.f('ix_player_season_stats_season'), table_name='player_season_stats')
    op.create_unique_constraint(op.f('uq_player_season'), 'player_season_stats', ['player_id', 'season'], postgresql_nulls_not_distinct=False)
    op.alter_column('player_season_stats', 'season',
               existing_type=sa.Integer(),
               type_=sa.VARCHAR(),
               existing_nullable=False)
    op.drop_column('player_season_stats', 'aerials_won_pct')
    op.drop_column('player_season_stats', 'aerials_lost')
    op.drop_column('player_season_stats', 'aerials_won')
    op.drop_column('player_season_stats', 'ball_recoveries')
    op.drop_column('player_season_stats', 'own_goals')
    op.drop_column('player_season_stats', 'penalty_kicks_conceded')
    op.drop_column('player_season_stats', 'penalty_kicks_won')
    op.drop_column('player_season_stats', 'offsides')
    op.drop_column('player_season_stats', 'fouls_drawn')
    op.drop_column('player_season_stats', 'fouls_committed')
    op.drop_column('player_season_stats', 'xg_plus_minus_per_90')
    op.drop_column('player_season_stats', 'xg_plus_minus')
    op.drop_column('player_season_stats', 'on_xg_against')
    op.drop_column('player_season_stats', 'on_xg_for')
    op.drop_column('player_season_stats', 'plus_minus_per_90')
    op.drop_column('player_season_stats', 'plus_minus')
    op.drop_column('player_season_stats', 'on_goals_against')
    op.drop_column('player_season_stats', 'on_goals_for')
    op.drop_column('player_season_stats', 'points_per_match')
    op.drop_column('player_season_stats', 'unused_substitute')
    op.drop_column('player_season_stats', 'substitutions_off')
    op.drop_column('player_season_stats', 'substitutions_on')
    op.drop_column('player_season_stats', 'complete_matches')
    op.drop_column('player_season_stats', 'minutes_per_start')
    op.drop_column('player_season_stats', 'minutes_pct')
    op.drop_column('player_season_stats', 'minutes_per_match')
    op.drop_column('player_season_stats', 'progressive_passes_received')
    op.drop_column('player_season_stats', 'passes_received')
    op.drop_column('player_season_stats', 'dispossessed')
    op.drop_column('player_season_stats', 'miscontrols')
    op.drop_column('player_season_stats', 'carries_into_penalty_area')
    op.drop_column('player_season_stats', 'carries_into_final_third')
    op.drop_column('player_season_stats', 'progressive_carries')
    op.drop_column('player_season_stats', 'progressive_carrying_distance')
    op.drop_column('player_season_stats', 'total_carrying_distance')
    op.drop_column('player_season_stats', 'carries')
    op.drop_column('player_season_stats', 'nutmegs')
    op.drop_column('player_season_stats', 'players_dribbled_past')
    op.drop_column('player_season_stats', 'dribble_success_pct')
    op.drop_column('player_season_stats', 'dribbles_attempted')
    op.drop_column('player_season_stats', 'dribbles_completed')
    op.drop_column('player_season_stats', 'touches_live_ball')
    op.drop_column('player_season_stats', 'touches_att_pen_area')
    op.drop_column('player_season_stats', 'touches_att_third')
    op.drop_column('player_season_stats', 'touches_mid_third')
    op.drop_column('player_season_stats', 'touches_def_third')
    op.drop_column('player_season_stats', 'touches_def_pen_area')
    op.drop_column('player_season_stats', 'touches')
    op.drop_column('player_season_stats', 'errors')
    op.drop_column('player_season_stats', 'clearances')
    op.drop_column('player_season_stats', 'interceptions')
    op.drop_column('player_season_stats', 'pass_blocks')
    op.drop_column('player_season_stats', 'shots_blocked')
    op.drop_column('player_season_stats', 'blocks')
    op.drop_column('player_season_stats', 'dribbled_past')
    op.drop_column('player_season_stats', 'dribbles_vs_tackles')
    op.drop_column('player_season_stats', 'dribble_tackles')
    op.drop_column('player_season_stats', 'tackles_att_third')
    op.drop_column('player_season_stats', 'tackles_mid_third')
    op.drop_column('player_season_stats', 'tackles_def_third')
    op.drop_column('player_season_stats', 'tackles_won')
    op.drop_column('player_season_stats', 'tackles')
    op.drop_column('player_season_stats', 'gca_defensive_action')
    op.drop_column('player_season_stats', 'gca_foul_drawn')
    op.drop_column('player_season_stats', 'gca_shot')
    op.drop_column('player_season_stats', 'gca_dribble')
    op.drop_column('player_season_stats', 'gca_dead_ball')
    op.drop_column('player_season_stats', 'gca_live_pass')
    op.drop_column('player_season_stats', 'goal_creating_actions')
    op.drop_column('player_season_stats', 'sca_defensive_action')
    op.drop_column('player_season_stats', 'sca_foul_drawn')
    op.drop_column('player_season_stats', 'sca_shot')
    op.drop_column('player_season_stats', 'sca_dribble')
    op.drop_column('player_season_stats', 'sca_dead_ball')
    op.drop_column('player_season_stats', 'sca_live_pass')
    op.drop_column('player_season_stats', 'shot_creating_actions')
    op.drop_column('player_season_stats', 'passes_blocked')
    op.drop_column('player_season_stats', 'passes_offside')
    op.drop_column('player_season_stats', 'straight_corners')
    op.drop_column('player_season_stats', 'outswinging_corners')
    op.drop_column('player_season_stats', 'inswinging_corners')
    op.drop_column('player_season_stats', 'corner_kicks')
    op.drop_column('player_season_stats', 'throw_ins')
    op.drop_column('player_season_stats', 'crosses')
    op.drop_column('player_season_stats', 'switches')
    op.drop_column('player_season_stats', 'through_balls')
    op.drop_column('player_season_stats', 'free_kick_passes')
    op.drop_column('player_season_stats', 'dead_ball_passes')
    op.drop_column('player_season_stats', 'live_ball_passes')
    op.drop_column('player_season_stats', 'progressive_passes')
    op.drop_column('player_season_stats', 'crosses_into_penalty_area')
    op.drop_column('player_season_stats', 'passes_into_penalty_area')
    op.drop_column('player_season_stats', 'passes_into_final_third')
    op.drop_column('player_season_stats', 'key_passes')
    op.drop_column('player_season_stats', 'long_passes_attempted')
    op.drop_column('player_season_stats', 'long_passes_completed')
    op.drop_column('player_season_stats', 'medium_passes_attempted')
    op.drop_column('player_season_stats', 'medium_passes_completed')
    op.drop_column('player_season_stats', 'short_passes_attempted')
    op.drop_column('player_season_stats', 'short_passes_completed')
    op.drop_column('player_season_stats', 'progressive_passing_distance')
    op.drop_column('player_season_stats', 'total_passing_distance')
    op.drop_column('player_season_stats', 'pass_completion_pct')
    op.drop_column('player_season_stats', 'passes_attempted')
    op.drop_column('player_season_stats', 'passes_completed')
    op.drop_column('player_season_stats', 'npxg_per_shot')
    op.drop_column('player_season_stats', 'xg_net')
    op.drop_column('player_season_stats', 'penalty_kicks_attempted')
    op.drop_column('player_season_stats', 'penalty_kicks_made')
    op.drop_column('player_season_stats', 'free_kick_shots')
    op.drop_column('player_season_stats', 'average_shot_distance')
    op.drop_column('player_season_stats', 'goals_per_shot_on_target')
    op.drop_column('player_season_stats', 'goals_per_shot')
    op.drop_column('player_season_stats', 'shots_on_target_pct')
    op.drop_column('player_season_stats', 'shots_on_target')
    op.drop_column('player_season_stats', 'shots_total')
    op.drop_column('player_season_stats', 'league')
    op.drop_column('player_season_stats', 'team')
    op.drop_column('player_season_stats', 'xA')
    op.drop_column('player_season_stats', 'xG')
    op.drop_column('player_season_stats', 'starts')
    op.drop_column('player_season_stats', 'minutes_played')
    op.drop_column('player_season_stats', 'red_cards')
    op.drop_column('player_season_stats', 'yellow_cards')
    op.drop_column('player_season_stats', 'assists')
    op.drop_column('player_season_stats', 'goals')
    op.drop_column('player_season_stats', 'matches')
    op.drop_constraint('uq_player_match', 'player_matches', type_='unique')
    op.create_unique_constraint(op.f('unique_match_event'), 'player_matches', ['player_id', 'match_date', 'opponent'], postgresql_nulls_not_distinct=False)
    op.create_index(op.f('ix_goalkeeper_stats_player_id'), 'goalkeeper_stats', ['player_id'], unique=False)
    op.create_unique_constraint(op.f('unique_stats_per_competition'), 'competition_stats', ['player_id', 'season', 'competition_name'], postgresql_nulls_not_distinct=False)
    op.create_index(op.f('ix_competition_stats_player_id'), 'competition_stats', ['player_id'], unique=False)
    op.create_table('live_matches',
    sa.Column('id', sa.INTEGER(), server_default=sa.text("nextval('live_matches_id_seq'::regclass)"), autoincrement=True, nullable=False),
    sa.Column('match_id', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('competition', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('home_team', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('away_team', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('home_score', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('away_score', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('status', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('kickoff_time', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('matchday', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('season', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('last_updated', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id', name='live_matches_pkey'),
    sa.UniqueConstraint('match_id', name='live_matches_match_id_key', postgresql_include=[], postgresql_nulls_not_distinct=False),
    postgresql_ignore_search_path=False
    )
    op.create_index(op.f('ix_live_matches_match_id'), 'live_matches', ['match_id'], unique=False)
    op.create_index(op.f('ix_live_matches_id'), 'live_matches', ['id'], unique=False)
    op.create_table('player_live_stats',
    sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('player_id', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('match_id', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('goals', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('assists', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('yellow_cards', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('red_cards', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('minutes_played', sa.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('is_live', sa.BOOLEAN(), autoincrement=False, nullable=True),
    sa.Column('team', sa.VARCHAR(), autoincrement=False, nullable=True),
    sa.Column('created_at', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.Column('last_updated', postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
    sa.ForeignKeyConstraint(['match_id'], ['live_matches.id'], name=op.f('player_live_stats_match_id_fkey')),
    sa.ForeignKeyConstraint(['player_id'], ['players.id'], name=op.f('player_live_stats_player_id_fkey')),
    sa.PrimaryKeyConstraint('id', name=op.f('player_live_stats_pkey'))
    )
    op.create_index(op.f('ix_player_live_stats_player_id'), 'player_live_stats', ['player_id'], unique=False)
    op.create_index(op.f('ix_player_live_stats_match_id'), 'player_live_stats', ['match_id'], unique=False)
    op.create_index(op.f('ix_player_live_stats_id'), 'player_live_stats', ['id'], unique=False)
    # ### end Alembic commands ###
