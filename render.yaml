services:
  # Backend FastAPI z schedulerm
  - type: web
    name: polish-players-backend
    env: python
    region: frankfurt  # Najbliższy region dla Polski
    plan: free
    rootDirectory: polish-players-tracker
    buildCommand: |
      pip install --upgrade pip
      pip install -r requirements.txt
      playwright install chromium
      playwright install-deps chromium
    startCommand: uvicorn app.backend.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: ENABLE_SCHEDULER
        value: "true"
      - key: SCHEDULER_TIMEZONE
        value: "Europe/Warsaw"
      - key: DATABASE_URL
        sync: false  # Dodaj ręcznie Supabase connection string w Dashboard
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASSWORD
        sync: false
      - key: EMAIL_FROM
        sync: false
      - key: EMAIL_TO
        sync: false
    healthCheckPath: /health
    
    # Database: Supabase PostgreSQL (cloud)
  # Dodaj DATABASE_URL w Render Dashboard → Environment Variables
databases: []
